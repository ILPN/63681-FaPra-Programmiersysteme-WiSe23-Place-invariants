<svg #drawingArea class="canvas">

    <defs>
        <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7"></polygon>
        </marker>
    </defs>

    // Places
    <g *ngFor="let place of places">
        <g>
            <circle class="place" [attr.cx]="place.position.x" [attr.cy]="place.position.y" r="25" />
            <text class="token-label" [attr.x]="place.position.x" [attr.y]="place.position.y" text-anchor="middle"
                dominant-baseline="central">{{place.token}}</text>
        </g>
        <text class="place-id" [attr.x]="place.position.x" [attr.y]="place.position.y + 45" text-anchor="middle">{{place.id}}</text>
    </g>

    // Transitions
    <g *ngFor="let transition of transitions">
        <rect [attr.class]="transition.isActive ? 'transition active' : 'transition'" [attr.x]="transition.position.x - 25" [attr.y]="transition.position.y - 25" width="50" height="50" />
        <text class="transition-id" [attr.x]="transition.position.x" [attr.y]="transition.position.y + 45" text-anchor="middle">{{transition.id}}</text>
    </g>

    // Arcs
    <g *ngFor="let arc of arcs">
        <polyline class="arc" [attr.points]="arc.polyLinePoints" marker-end="url(#arrow)"></polyline>

        // Weight at Arc without Anchorpoints - Middle of Polyline
        // White Text for Background
        <text *ngIf="arc.anchors.length == 0" class="arc-weight" [attr.x]="(arc.from.position.x + arc.to.position.x) / 2" [attr.y]="(arc.from.position.y + arc.to.position.y) / 2"  style="stroke:white; stroke-width:0.8em">{{arc.weight}}</text>
        <text *ngIf="arc.anchors.length == 0" class="arc-weight" [attr.x]="(arc.from.position.x + arc.to.position.x) / 2" [attr.y]="(arc.from.position.y + arc.to.position.y) / 2" >{{arc.weight}}</text>

        // Weight at Arc with 1 Anchorpoint - At the Anchorpoint
        <text *ngIf="arc.anchors.length == 1" class="arc-weight" [attr.x]="arc.anchors[0].x" [attr.y]="arc.anchors[0].y">{{arc.weight}}</text>

        // Weight at Arc with 2 Anchorpoints - Middle of the middle Line
        <text *ngIf="arc.anchors.length == 2" class="arc-weight" [attr.x]="(arc.anchors[0].x + arc.anchors[1].x) / 2" [attr.y]="(arc.anchors[0].y + arc.anchors[1].y) / 2" >{{arc.weight}}</text>

        // Weight at Arc with 3 Anchorpoints - At the middle Anchorpoint
        <text *ngIf="arc.anchors.length == 3" class="arc-weight" [attr.x]="arc.anchors[1].x" [attr.y]="arc.anchors[1].y">{{arc.weight}}</text>

    </g>

</svg>
