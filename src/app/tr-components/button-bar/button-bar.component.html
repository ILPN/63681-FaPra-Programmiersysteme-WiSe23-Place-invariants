<mat-tab-group (selectedTabChange)="tabClicked($event.tab.textLabel)">
    <mat-tab label="build">
        <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon">edit</mat-icon>
            Build
        </ng-template>

        <!-- buttons for tab "build" -->
        <div class="button-container">
            <!-- blitz tool -->
            <button
                mat-icon-button
                [color]="
                    uiService.button === ButtonState.Blitz ? 'primary' : ''
                "
                (click)="buttonClicked(ButtonState.Blitz)"
                matTooltip="Auto-Petrinet"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>bolt</mat-icon>
            </button>

            <!-- divider -->
            <div class="divider"></div>

            <!-- places -->
            <button
                mat-icon-button
                [color]="
                    uiService.button === ButtonState.Place ? 'primary' : ''
                "
                (click)="buttonClicked(ButtonState.Place)"
                matTooltip="Add Place"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>circle</mat-icon>
            </button>

            <!-- transitions -->
            <button
                mat-icon-button
                [color]="
                    uiService.button === ButtonState.Transition ? 'primary' : ''
                "
                (click)="buttonClicked(ButtonState.Transition)"
                matTooltip="Add transition"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>square</mat-icon>
            </button>

            <!-- arcs -->
            <button
                mat-icon-button
                [color]="uiService.button === ButtonState.Arc ? 'primary' : ''"
                (click)="buttonClicked(ButtonState.Arc)"
                matTooltip="Add arc"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>north_east</mat-icon>
            </button>

            <!-- anchor points -->
            <button
                mat-icon-button
                [color]="
                    uiService.button === ButtonState.Anchor ? 'primary' : ''
                "
                (click)="buttonClicked(ButtonState.Anchor)"
                matTooltip="Add anchor point"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>linear_scale</mat-icon>
            </button>

            <!-- divider -->
            <div class="divider"></div>

            <!-- add token tool -->
            <button
                mat-icon-button
                [color]="uiService.button === ButtonState.Add ? 'primary' : ''"
                (click)="buttonClicked(ButtonState.Add)"
                matTooltip="Increase tokens or weight"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>add</mat-icon>
            </button>

            <!-- remove token tool -->
            <button
                mat-icon-button
                [color]="
                    uiService.button === ButtonState.Remove ? 'primary' : ''
                "
                (click)="buttonClicked(ButtonState.Remove)"
                matTooltip="Decrease tokens or weight"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>remove</mat-icon>
            </button>

            <!-- delete tool -->
            <button
                mat-icon-button
                [color]="
                    uiService.button === ButtonState.Delete ? 'primary' : ''
                "
                (click)="buttonClicked(ButtonState.Delete)"
                matTooltip="Delete single element"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>delete</mat-icon>
            </button>

            <!-- clear all tool -->
            <button
                mat-icon-button
                [color]="
                    uiService.button === ButtonState.Clear ? 'primary' : ''
                "
                (click)="openClearDialog()"
                matTooltip="Delete the whole petrinet"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>clear</mat-icon>
            </button>

            <!-- divider -->
            <div class="divider"></div>

            <!-- move tool -->
            <button
                mat-icon-button
                [color]="uiService.button === ButtonState.Move ? 'primary' : ''"
                (click)="buttonClicked(ButtonState.Move)"
                matTooltip="Move individual elements or the complete petri net (canvas drag)"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>open_with</mat-icon>
            </button>

            <!-- divider -->
            <div class="divider"></div>

            <!-- select tool -->
            <button
                mat-icon-button
                [color]="
                    uiService.button === ButtonState.Select ? 'primary' : ''
                "
                (click)="buttonClicked(ButtonState.Select)"
                matTooltip="Add action label to a transition"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>ads_click</mat-icon>
            </button>

            <!-- customize actions tool -->
            <button
                mat-icon-button
                (click)="openActionDialog()"
                matTooltip="Edit action label options"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>edit_note</mat-icon>
            </button>
        </div>

        <div class="button-container float-right">
            <button
                mat-stroked-button
                class="text-button"
                (click)="applyLayout('spring-embedder')"
                matTooltip="Apply spring embedder layout to current petrinet"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                Spring Embedder
            </button>

            <!-- apply sugyiama layout (once) -->
            <button
                mat-stroked-button
                class="text-button"
                (click)="applyLayout('sugyiama')"
                matTooltip="Apply sugyiama layout to current petrinet"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                Sugyiama
            </button>

            <button
                mat-icon-button
                (click)="openHelpDialog()"
                matTooltip="Show help page for 'build' mode"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>help</mat-icon>
            </button>
        </div>
    </mat-tab>

    <mat-tab label="play">
        <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon">play_arrow</mat-icon>
            Play
        </ng-template>

        <!-- buttons for tab "play" -->
        <div class="button-container">
            <!-- restart tool -->
            <button
                mat-icon-button
                [disabled]="tokenGameService.isGameHistoryEmpty()"
                (click)="tokenGameService.resetGame()"
                matTooltip="Reset to start"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>restart_alt</mat-icon>
            </button>

            <!-- rewind tool -->
            <button
                mat-icon-button
                [disabled]="tokenGameService.isGameHistoryEmpty()"
                (click)="tokenGameService.revertToPreviousState()"
                matTooltip="Go back one step"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>fast_rewind</mat-icon>
            </button>
        </div>
        <div class="button-container float-right">
            <button
                mat-icon-button
                (click)="openHelpDialog()"
                matTooltip="Show help page for 'play' mode"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>help</mat-icon>
            </button>
        </div>
    </mat-tab>

    <mat-tab label="analyze">
        <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon">functions</mat-icon>
            Analyze
        </ng-template>

        <!-- buttons for tab "analyze" -->
        <div class="button-container">
            <button
                mat-stroked-button
                class="text-button"
                (click)="
                    placeInvariantsService.calculatePIs();
                    openPlaceInvariantsTable()
                "
                matTooltip="Calculate place invariants with Farkas algorithm"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                Place Invariants (Farkas)
            </button>
            <button
                mat-stroked-button
                class="text-button"
                (click)="
                    placeInvariantsService.calculatePIs();
                    placeInvariantsService.removeNonMinimalPIs();
                    openPlaceInvariantsTable()
                "
                matTooltip="Remove linearly dependent place invariants from result matrix of Farkas algorithm"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                Minimal Place Invariants
            </button>

            <!-- divider -->
            <div class="divider"></div>

            <!-- show table with place invariants -->
            <!-- <button
                mat-icon-button
                [disabled]="placeInvariantsService.placeInvariantsMatrix.length === 0"
                (click)="placeInvariantsService.showFullTable=true; openPlaceInvariantsTable()"
                matTooltip="Show table with place invariants from latest calculation and select place invariants for linear combination."
                [matTooltipShowDelay]="showDelay"
            >
                <mat-icon>view_headline</mat-icon>
            </button> -->
            <button
                mat-stroked-button
                class="text-button"
                [disabled]="
                    !placeInvariantsService.placeInvariantsMatrix
                "
                (click)="
                    placeInvariantsService.showFullTable = true;
                    openPlaceInvariantsTable()
                "
                matTooltip="Show table with place invariants (PIs) from latest calculation and select place invariants for linear combination."
                [matTooltipShowDelay]="showTooltipDelay"
            >
                Show/Select Place Invariants
            </button>
        </div>

        <div class="button-container float-right">
            <button
                mat-icon-button
                (click)="openHelpDialog()"
                matTooltip="Show help page for 'analyze' mode"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>help</mat-icon>
            </button>
        </div>
    </mat-tab>

    <mat-tab label="save">
        <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon">download</mat-icon>
            Save
        </ng-template>

        <!-- buttons for tab "save" -->
        <div class="button-container">
            <!-- export as json -->
            <button
                mat-stroked-button
                class="text-button"
                (click)="exportJsonDataService.exportAsJson()"
                matTooltip="Export petrinet as JSON"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                JSON
            </button>

            <!-- export as pnml -->
            <button
                mat-stroked-button
                class="text-button"
                (click)="pnmlService.writePNML()"
                matTooltip="Export petrinet as PNML"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                PNML
            </button>

            <!-- divider -->
            <div class="divider"></div>

            <!-- export as png -->
            <button
                mat-stroked-button
                class="text-button"
                (click)="
                    exportImageService.exportAsImage(
                        'image/png',
                        'pngExport.png'
                    )
                "
                matTooltip="Save petrinet as PNG image"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                PNG
            </button>

            <!-- export as svg -->
            <button
                mat-stroked-button
                class="text-button"
                (click)="exportSvgService.exportAsSvg()"
                matTooltip="Save petrinet as SVG image"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                SVG
            </button>
        </div>

        <div class="button-container float-right">
            <button
                mat-icon-button
                (click)="openHelpDialog()"
                matTooltip="Show help page for 'save' mode"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>help</mat-icon>
            </button>
        </div>
    </mat-tab>

    <mat-tab label="code">
        <ng-template mat-tab-label>
            <mat-icon class="example-tab-icon">data_object</mat-icon>
            Code
        </ng-template>

        <!-- buttons for tab "code" -->
        <div class="button-container">
            <!-- reset button -->
            <button
                mat-icon-button
                matTooltip="Reset code editor to the current petrinet state"
                [matTooltipShowDelay]="showTooltipDelay"
                (click)="
                    uiService.codeEditorFormat$.next(
                        uiService.codeEditorFormat$.value
                    )
                "
            >
                <mat-icon>restart_alt</mat-icon>
            </button>

            <!-- apply button -->
            <button
                mat-icon-button
                matTooltip="Apply the source code in the code editor as the new petrinet state"
                [matTooltipShowDelay]="showTooltipDelay"
                (click)="buttonClicked(ButtonState.ApplyCode)"
            >
                <mat-icon>task</mat-icon>
            </button>
        </div>

        <div class="button-container float-right">
            <!-- switch code editor to json format -->
            <button
                mat-stroked-button
                class="text-button"
                [color]="
                    uiService.codeEditorFormat$.value === CodeEditorFormat.JSON
                        ? 'primary'
                        : ''
                "
                (click)="switchCodeEditorFormat(CodeEditorFormat.JSON)"
                matTooltip="Switch the code editor format to JSON"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                JSON
            </button>

            <!-- switch code editor to pnml format -->
            <button
                mat-stroked-button
                class="text-button"
                [color]="
                    uiService.codeEditorFormat$.value === CodeEditorFormat.PNML
                        ? 'primary'
                        : ''
                "
                (click)="switchCodeEditorFormat(CodeEditorFormat.PNML)"
                matTooltip="Switch the code editor format to PNML"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                PNML
            </button>

            <button
                mat-icon-button
                (click)="openHelpDialog()"
                matTooltip="Show help page for 'code' mode"
                [matTooltipShowDelay]="showTooltipDelay"
            >
                <mat-icon>help</mat-icon>
            </button>
        </div>
    </mat-tab>
</mat-tab-group>
