<div fxLayout="row" fxLayoutAlign="space-between center">
    <h2
        mat-dialog-title
        style="font-size: 18px;"
    >
        <!-- {{
            placeInvariantsService.selectedPlaceForPITable ?
            placeInvariantsService.selectedPlaceForPITable.id :
            placeInvariantsService.placeInvariantsMatrix.length +
            (
                placeInvariantsService.isMinimal ?
                ' Minimal Place Invariants' :
                ' Place Invariants (Farkas)'
            )
        }} -->
        {{placeInvariantsService.headerPItable()}}
    </h2>

    <button
        mat-dialog-close
        mat-icon-button
        class="close-button"
        (click)="
            placeInvariantsService.selectedPlaceForPITable = undefined;
            placeInvariantsService.showFullTable = false;
        "
    >
        <mat-icon>close</mat-icon>
    </button>
</div>

<div mat-dialog-content>
    <!-- <p *ngIf="placeInvariantsService.selectedPlaceForPITable">There are {{placeInvariantsService.placeInvariantsWithSelectedPlace().length}} place invariants that contain {{placeInvariantsService.selectedPlaceForPITable.id}}</p> -->
    <p *ngIf="placeInvariantsService.selectedPlaceForPITable">
        {{placeInvariantsService.infoPIsWithSelectedPlace()}}
    </p>
    <ng-container *ngIf="placeInvariantsService.showFullTable">
        <p>Linear combination of selected place invariants:</p>
        <p>Show full table</p>
    </ng-container>
    <table *ngIf="placeInvariantsService.pITableHasData">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col" *ngFor="let placeId of placeInvariantsService.placeIds">{{ placeId }}</th>
            </tr>
        </thead>
        <tbody>
            <ng-container *ngFor="
                let row of placeInvariantsService.placeInvariantsMatrix;
                let i = index
            ">
                <tr
                    *ngIf="placeInvariantsService.includePI(row)"
                    [ngClass]="{
                        'selected-row': placeInvariantsService.selectedPIs[i]
                    }"
                >
                    <th scope="row">{{ i + 1 }}</th>
                    <td *ngFor="let coefficient of row"
                        (click)="placeInvariantsService.toggleSelectedPI(i)"
                    >
                        {{ coefficient }}
                    </td>
                </tr>
            </ng-container>
        </tbody>
    </table>
</div>

